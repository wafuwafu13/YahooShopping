{"version":3,"sources":["components/Ranking.js","actions/Ranking.js","containers/Ranking.js","containers/Nav.js","components/Nav.js","App.js","reducers/shopping.js","reducers/Ranking.js","index.js","createStore.js"],"names":["name_s","color","card_s","Ranking","this","props","onMount","categoryId","nextProps","onUpdate","_this$props","category","ranking","error","react_default","a","createElement","style","concat","name","map","item","i","Card_default","key","code","maxWidth","margin","Card","image","imageUrl","title","height","Typography_default","type","Button_default","raised","fullWidth","href","url","React","Component","defaultProps","startRequest","payload","receiveData","response","finishRequest","fetchRanking","_ref","Object","asyncToGenerator","regenerator_default","mark","_callee","dispatch","getState","categories","queryString","responce","data","wrap","_context","prev","next","shopping","find","id","replace","abrupt","qs","stringify","appid","category_id","fetchJsonp","sent","json","t0","stop","_x","_x2","apply","arguments","connect","state","ownProps","actions","onClick","path","push","List_default","marginTop","List","button","to","primary","App","className","Reboot_default","AppBar_default","Toolbar_default","containers_Nav","padding","Switch","Route","component","render","Redirect","match","containers_Ranking","params","initialState","getRanking","itemLength","ResultSet","totalResultsReturned","index","Result","Code","Name","Url","Image","Medium","undefined","reducers_Ranking","length","action","objectSpread","history","createBrowserHistory","store","reduxCreateStore","combineReducers","reducers","router","routerReducer","applyMiddleware","logger","thunk","routerMiddleware","ReactDOM","es","react_router_redux_es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d082c82f.chunk.js","sourcesContent":["import React from 'react';\nimport Card, { CardMedia, CardContent,CardActions} from 'material-ui/Card';\nimport Typography from 'material-ui/Typography';\nimport Button from 'material-ui/Button';\nimport PropTypes from 'prop-types';\n\nconst name_s =  {\n  color:\"red\"\n}\n\nconst card_s = {\n  color:\"gold\"\n}\n\nexport default class Ranking extends React.Component {\n  componentWillMount() {\n    this.props.onMount(this.props.categoryId);\n  }\n  componentWillReceiveProps(nextProps) {\n    if (this.props.categoryId !== nextProps.categoryId) {\n      this.props.onUpdate(nextProps.categoryId);\n    }\n  }\n\n  render() {\n    const { category, ranking, error } = this.props;\n\n    return (\n      <div >\n        <h2 style={name_s}>{\n          typeof category !== 'undefined'\n            ? `${category.name}のランキング`\n            : ''\n        }</h2>\n\n        {(() => {\n          if (error) {\n            return <p>エラーが発生しました。リロードしてください。</p>;\n          } else if (typeof ranking === 'undefined') {\n\n            return <p>ちょっと待って！！！</p>;\n          } else {\n\n            return ranking.map((item, i) =>(\n                <Card\n                  key={`ranking-item-${item.code}`}\n                  style={{maxWidth: '500px',margin: '32px auto'}}\n                >\n                <CardMedia\n                 image={item.imageUrl}\n                 title={`${i + 1}位  ${item.name}`}\n                 style={{height:'200px'}}\n                />\n                <CardContent>\n                    <Typography type=\"title\" style={card_s}>\n                        {`${i + 1}位`}\n                    </Typography>\n                    <Typography>\n                        {`${item.name}`}\n                    </Typography>\n                </CardContent>\n                <CardActions>\n                  <Button\n                   raised\n                   color=\"secondary\"\n                   fullWidth\n                   href={item.url}\n                   >商品ページへ</Button>\n                </CardActions>\n                </Card>\n\n            ));\n            }\n        })()}\n      </div>\n    );\n  }\n}\n\nRanking.propTypes = {\n  categoryId: PropTypes.string.isRequired,\n  onMount: PropTypes.func.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n\n\n  category: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n  ranking: PropTypes.arrayOf(\n    PropTypes.shape({\n      code: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      url: PropTypes.string.isRequired,\n      imageUrl: PropTypes.string.isRequired,\n    })\n  ),\n  error: PropTypes.bool.isRequired\n};\nRanking.defaultProps = {\n    categoryId: '1'\n};","import fetchJsonp from 'fetch-jsonp';\nimport qs from 'qs';\nimport { replace } from 'react-router-redux';\n\nconst API_URL = 'https://shopping.yahooapis.jp/ShoppingWebService/V1/json/categoryRanking';\nconst APP_ID = 'dj00aiZpPUtSZWFsd0M4aUpDSyZzPWNvbnN1bWVyc2VjcmV0Jng9MDU-';\n\n\nconst startRequest = category => ({\n  type: 'START_REQUEST',\n  payload: { category },\n});\nconst receiveData = (category, error, response) => ({\n  type: 'RECEIVE_DATA',\n  payload: { category, error, response },\n});\nconst finishRequest = category => ({\n  type: 'FINISH_REQUEST',\n  payload: { category },\n});\n\n\nexport const fetchRanking = categoryId => {\n\n  return async (dispatch, getState) => {\n\n    const categories = getState().shopping.categories;\n    const category = categories.find(category => (category.id === categoryId));\n\n    if (typeof category === 'undefined') {\n      dispatch(replace('/'));\n      return;\n    }\n\n    dispatch(startRequest(category));\n\n    const queryString = qs.stringify({\n      appid: APP_ID,\n      category_id: categoryId,\n    });\n    try {\n      const responce = await fetchJsonp(`${API_URL}?${queryString}`);\n      const data = await responce.json();\n      dispatch(receiveData(category, null, data));\n    } catch (err) {\n      dispatch(receiveData(category, err));\n    }\n\n    dispatch(finishRequest(category));\n  };\n};","import { connect } from 'react-redux';\nimport Ranking from '../components/Ranking';\nimport * as actions from '../actions/Ranking';\n\nconst mapStateToProps = (state, ownProps) => ({\n  categoryId: ownProps.categoryId,\n  category: state.Ranking.category,\n  ranking: state.Ranking.ranking,\n  error: state.Ranking.error\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onMount (categoryId) {\n    dispatch(actions.fetchRanking(categoryId));\n  },\n  onUpdate (categoryId) {\n    dispatch(actions.fetchRanking(categoryId));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Ranking);\n","import { connect } from 'react-redux';\nimport { push } from 'react-router-redux';\nimport Nav from '../components/Nav';\n\nconst mapStateToProps = state => ({\n  categories: state.shopping.categories\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClick (path) {\n    dispatch(push(path));\n  }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport List, { ListItem, ListItemText } from 'material-ui/List';\n\nexport default function Nav({ categories, onClick }) {\n\n  const to = category => (\n    category.id === '1'\n      ? '/all'\n      : `/category/${category.id}`\n  );\n\n  return (\n\n      <List style={{marginTop: 64}}>\n        {categories.map(category => (\n          <ListItem\n            button\n            key={`menu-item-${category.id}`}\n            onClick={() => onClick(to(category))}\n          >\n            <ListItemText primary={category.name} />\n          </ListItem>\n        ))}\n      </List>\n\n  );\n}\nNav.propTypes = {\n  categories: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired\n    })\n  ).isRequired,\n\n  onClick: PropTypes.func.isRequired\n};","import React, { Component } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Ranking from './containers/Ranking';\nimport Nav from './containers/Nav';\nimport Reboot from 'material-ui/Reboot';\nimport AppBar from 'material-ui/AppBar';\nimport Toolbar from 'material-ui/Toolbar';\nimport Typography from 'material-ui/Typography';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n\n        <Reboot/>\n\n        <AppBar color=\"secondary\">\n          <Toolbar>\n            <Typography type='title' color=\"inherit\">\n              Yahoo!ショッピングランキング\n            </Typography>\n          </Toolbar>\n        </AppBar>\n\n        <Nav />\n       <div style={{ marginTop: 64, padding: 32}}>\n        <Switch>\n          <Route path=\"/all\" component={Ranking} />\n          <Route\n            path=\"/category/1\"\n            render={() => <Redirect to=\"/all\" />}\n          />\n          <Route\n            path=\"/category/:id\"\n            render={\n              ({ match }) => <Ranking categoryId={match.params.id} />\n            }\n          />\n        </Switch>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default App;","const initialState = {\n    categories:[\n        {\n          id: '1',\n          name: 'すべてのカテゴリ'\n        },\n        {\n          id: '2502',\n          name: 'パソコン、周辺機器'\n        },\n        {\n          id: '10002',\n          name: '本、雑誌、コミック'\n        }\n    ]\n};\n\nexport default () => initialState;","const getRanking = response => {\n    const ranking = [];\n    const itemLength = response.ResultSet.totalResultsReturned\n    for (let index = 0; index < itemLength; index++) {\n      const item = response.ResultSet['0'].Result[index + ''];\n      ranking.push({\n        code: item.Code,\n        name: item.Name,\n        url: item.Url,\n        imageUrl: item.Image.Medium\n      })\n    }\n    return ranking;\n  };\n\n  const initialState = {\n    category: undefined,\n    ranking: undefined,\n    error: false\n  };\n\n  export default (state = initialState, action) => {\n    switch (action.type) {\n\n      case 'START_REQUEST':\n        return {\n          category: action.payload.category,\n          ranking: undefined,\n          error: false\n        };\n\n      case 'RECEIVE_DATA':\n        return action.payload.error\n          ? { ...state, error: true }\n          : {\n              ...state,\n              ranking: getRanking(action.payload.response)\n            };\n\n      default:\n        return state;\n    }\n  }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider} from 'react-redux';\nimport { ConnectedRouter } from 'react-router-redux';\nimport createBrowserHistory from 'history/createBrowserHistory';\nimport App from './App';\nimport createStore from './createStore';\n\nconst history = createBrowserHistory();\n\nconst store = createStore(history);\n\nReactDOM.render(\n    <Provider store={store}>\n        <ConnectedRouter history={history}>\n            <App />\n        </ConnectedRouter>\n    </Provider>,\n    document.getElementById('root')\n);","import {\n    createStore as reduxCreateStore,\n    combineReducers,\n    applyMiddleware\n} from 'redux';\nimport logger from 'redux-logger';\nimport thunk from 'redux-thunk';\nimport { routerReducer, routerMiddleware } from 'react-router-redux';\nimport * as reducers from './reducers' ;\n\nexport default function createStore(history){\n    return reduxCreateStore(\n        combineReducers({\n            ...reducers,\n            router: routerReducer,\n         }),\n         applyMiddleware(\n             logger,\n             thunk,\n             routerMiddleware(history)\n         )\n    );\n}"],"sourceRoot":""}